var LinkVisualization;(function(n){function c(n){var t=[];return n.forEach(function(n){t.push(n.GameMatrix)}),t}function l(n,i){t=n,f=i;var u=document.getElementById("chart"),r=1e3;a(r,r,r*.41,r*.41*1.1),e()}function e(){var t=document.getElementById("chart"),n=Math.min(t.clientWidth,h);i.transition().delay(0).duration(0).attr("transform","translate("+n/2+","+n/2+")"),r.transition().delay(0).duration(0).attr("transform","scale("+n/1e3+")"),u.transition().delay(0).duration(0).attr("height",n).attr("width",n)}function a(n,e,h,l){function k(n){return function(t,i){a.selectAll("g.chord path").filter(function(n){return n.source.index!=i&&n.target.index!=i}).transition().style("opacity",n)}}var b=c(t),p=d3.layout.chord().padding(.05).sortSubgroups(d3.descending).matrix(b),a,v,w,y;u=i=d3.select("#chart").append("svg").attr("width",n).attr("height",e).attr("name","linkvisualization"),i=u.append("g").attr("transform","translate("+n/2+","+e/2+")"),r=i.append("g").attr("transform","scale(1)"),a=r,v=a.selectAll(".group").data(p.groups).enter().append("g").attr("class","group").on("mouseover",function(n,i){a.selectAll("g.chord path").filter(function(n){return n.source.index!=i&&n.target.index!=i}).transition().style("opacity",.1),f.FireEvent(t[i])}).on("mouseout",k(1)),v.append("title").text(function(n,i){return t[i].Name}),w=v.append("path").attr("id",function(n,t){return"group"+t}).style("fill","#888888").style("stroke","#888888").attr("d",d3.svg.arc().innerRadius(h).outerRadius(l)),y=v.append("text").attr("x",6).attr("dy",30),y.append("textPath").attr("xlink:href",function(n,t){return"#group"+t}).text(function(n,i){return t[i].Name}).attr("font-size","36"),y.filter(function(n,t){return w[0][t].getTotalLength()/3-5<this.getComputedTextLength()}).remove(),a.append("g").attr("class","chord").selectAll("path").data(p.chords).enter().append("path").style("fill",function(n){return s(t[n.source.index].Matrix[n.target.index])}).attr("d",d3.svg.chord().radius(h)).style("opacity",1).append("title").text(function(n){return t[n.source.index].Name+" and "+t[n.target.index].Name+": "+o(t[n.source.index].Matrix[n.target.index])+"\n"+n.source.value+" Games"})}var o=d3.format(".1%"),s=d3.scale.linear().domain([0,.5,1]).range(["red","#CCCCCC","green"]),t,f,h=480,i,r,u;n.CreateChordDiagram=l,n.resize=e})(LinkVisualization||(LinkVisualization={}))